{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "container|align": "stretch",
        "designer|userAlias": "job",
        "designer|userClassName": "Job",
        "frame": true,
        "layout": "vbox",
        "minHeight": 500,
        "minWidth": 500,
        "mixins": [
            "['DocForm']"
        ],
        "title": "Job"
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "frame": "boolean",
        "height": "auto",
        "title": "string",
        "width": "auto",
        "minHeight": "number",
        "minWidth": "number",
        "container|align": "string",
        "layout": "string",
        "mixins": "object"
    },
    "name": "MyPanel",
    "designerId": "d38c2cf0-9e53-498a-8521-da773f47156a",
    "viewControllerInstanceId": "8e77139f-bc05-4a61-ab7b-54ee0eb6e2c6",
    "viewModelInstanceId": "f565af02-a06d-4dc3-95d1-9c4c266bfbf2",
    "cn": [
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "itemId": "jobToolbar",
                "layout|flex": 1
            },
            "configAlternates": {
                "dock": "string",
                "itemId": "string",
                "layout|flex": "number"
            },
            "name": "MyToolbar",
            "designerId": "8d64bde7-9540-4f53-89e8-5ae9cd6ee040"
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout": "hbox",
                "padding": 10
            },
            "configAlternates": {
                "layout": "string",
                "padding": "auto"
            },
            "name": "MyContainer1",
            "designerId": "f62d6bf9-fa29-4b04-b6b3-5b2b9088b892",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Job",
                        "itemId": "job",
                        "labelAlign": "right"
                    },
                    "configAlternates": {
                        "fieldLabel": "string",
                        "itemId": "string",
                        "labelAlign": "string"
                    },
                    "name": "MyTextField",
                    "designerId": "390d6bfa-9ca7-4b1c-932c-6edecf0ad625"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "displayField": "status",
                        "fieldLabel": "Status",
                        "forceSelection": true,
                        "itemId": "status",
                        "labelAlign": "right",
                        "labelWidth": 70,
                        "margin": "0 0 0 15",
                        "queryMode": "local",
                        "store": [
                            "{StatusStore}"
                        ],
                        "valueField": "status"
                    },
                    "configAlternates": {
                        "store": "binding",
                        "displayField": "datafield",
                        "fieldLabel": "string",
                        "forceSelection": "boolean",
                        "itemId": "string",
                        "labelAlign": "string",
                        "labelWidth": "number",
                        "margin": "auto",
                        "queryMode": "string",
                        "valueField": "datafield"
                    },
                    "name": "MyComboBox1",
                    "designerId": "c983ed05-49ad-410b-aaf4-e19050495947",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onStatusAfterRender",
                                "implHandler": [
                                    "AppWindowManager.appOn('dropDownSelectionEditor', {",
                                    "\tscope:this,",
                                    "\tselectionchanged:function() {",
                                    "\t\tthis.readJobStatuses();",
                                    "\t}",
                                    "});",
                                    "",
                                    "component.el.on({",
                                    "    contextmenu: function(event) {",
                                    "        event.stopEvent();",
                                    "        AppWindowManager.appLink('dropDownSelectionEditor', {dataKey:'jobStatus'});",
                                    "    },",
                                    "    scope:this",
                                    "});",
                                    ""
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onStatusAfterRender",
                            "designerId": "db1b0afd-fbbb-4c04-9d32-1a078f73c88f"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Create Date",
                        "itemId": "jobCreateDate",
                        "labelAlign": "right",
                        "labelWidth": 70,
                        "margin": "0 0 0 10"
                    },
                    "configAlternates": {
                        "fieldLabel": "string",
                        "itemId": "string",
                        "labelAlign": "string",
                        "labelWidth": "number",
                        "margin": "auto"
                    },
                    "name": "MyDateField",
                    "designerId": "475a1860-12cb-41ca-a786-048e5e72b84a"
                }
            ]
        },
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "activeTab": 0,
                "bodyStyle": "background:none",
                "deferredRender": false,
                "flex": 1,
                "itemId": "jobTabPanel"
            },
            "configAlternates": {
                "bodyStyle": "string",
                "flex": "number",
                "activeTab": "auto",
                "deferredRender": "boolean",
                "itemId": "string"
            },
            "name": "MyTabPanel",
            "designerId": "559d4e15-8739-4295-8226-bfcf139130c8",
            "cn": [
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "bodyPadding": 10,
                        "bodyStyle": "background:none",
                        "itemId": "job",
                        "title": "Job"
                    },
                    "configAlternates": {
                        "bodyPadding": "auto",
                        "bodyStyle": "string",
                        "title": "string",
                        "itemId": "string"
                    },
                    "name": "MyPanel",
                    "designerId": "f629f7dc-fa9a-4839-ac75-af1453ca9862",
                    "cn": [
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig",
                            "designerId": "a02f9759-1672-45a1-a13a-7ae3fb1c1037"
                        },
                        {
                            "type": "Ext.form.field.ComboBox",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "displayField": "partName",
                                "emptyText": "BEGIN TYPING",
                                "fieldLabel": "Part",
                                "forceSelection": true,
                                "hideTrigger": true,
                                "itemId": "part",
                                "minChars": 1,
                                "queryParam": "partName",
                                "store": [
                                    "{PartStore}"
                                ],
                                "typeAhead": true,
                                "typeAheadDelay": 150,
                                "valueField": "partId",
                                "width": 337
                            },
                            "configAlternates": {
                                "fieldLabel": "string",
                                "store": "binding",
                                "displayField": "datafield",
                                "emptyText": "string",
                                "forceSelection": "boolean",
                                "hideTrigger": "boolean",
                                "itemId": "string",
                                "minChars": "number",
                                "queryParam": "string",
                                "typeAhead": "boolean",
                                "typeAheadDelay": "number",
                                "valueField": "datafield",
                                "width": "auto"
                            },
                            "name": "MyComboBox",
                            "designerId": "df3167ae-270a-4520-a5b7-72e9a6224f7f"
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "Quantity",
                                "itemId": "quantity"
                            },
                            "configAlternates": {
                                "fieldLabel": "string",
                                "itemId": "string"
                            },
                            "name": "MyTextField1",
                            "designerId": "60b5e0c9-38ff-4006-a410-54b89bc380cc"
                        },
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "Start Date",
                                "itemId": "jobStartDate",
                                "submitFormat": "Y-m-d"
                            },
                            "configAlternates": {
                                "fieldLabel": "string",
                                "itemId": "string",
                                "labelAlign": "string",
                                "labelWidth": "number",
                                "margin": "auto",
                                "submitFormat": "string"
                            },
                            "name": "MyDateField1",
                            "designerId": "0e87f1bb-6724-4d4c-9b66-363717a60a53",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onJobStartDateAfterRender",
                                        "implHandler": [
                                            "component.getEl().on('dblclick', function() {",
                                            "    component.setValue(new Date());",
                                            "});"
                                        ],
                                        "name": "afterrender",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onJobStartDateAfterRender",
                                    "designerId": "a4ca3c88-56f1-453c-b73f-d772b3372886"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "jobBomTab"
                    },
                    "configAlternates": {
                        "itemId": "string"
                    },
                    "name": "jobbom",
                    "designerId": "33e88ca4-c64e-478b-b55b-01017868d8e3",
                    "masterInstanceId": "97f02f24-fec6-48dd-adf9-d5b6658e993d",
                    "cn": [
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig1",
                            "designerId": "417240e5-8349-4e2b-b2de-bdc23d815fc8"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelAfterRender",
                "implHandler": [
                    "this.docFormInit({",
                    "\ttoolbarId:'jobToolbar',",
                    "\taddFn:'createJob',",
                    "\tsaveFn:'updateJob',",
                    "\tdeleteFn:'deleteJob',",
                    "\tsearchFn:'searchJobs',",
                    "\tsearchableFields:['job', 'part']",
                    "});",
                    "this.fireEvent('appdataloaded');",
                    "this.readJobStatuses();",
                    "this.addAppWindowManagerListeners();"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPanelAfterRender",
            "designerId": "5605bdbc-1897-46b4-8843-d0ec2828fdeb"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "addAppWindowManagerListeners",
                "implHandler": [
                    "AppWindowManager.on('applinkjob',function(linkEvent){",
                    "    this.queryById('jobTabPanel').setActiveTab('job');",
                    "    this.readJob(linkEvent.dataKey);",
                    "    return false;",
                    "}, this);"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "addAppWindowManagerListeners",
            "designerId": "456097e4-5cc4-4232-aa39-3d948b5b4115"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "searchJobs",
                "implHandler": [
                    "if(!this.jobSearchWindow) {",
                    "\tthis.jobSearchWindow = Ext.create(\"Job.view.JobSearch\", {",
                    "\t\tlisteners:{",
                    "\t\t\tscope:this,",
                    "\t\t\tjobselected:function(jobId) {",
                    "\t\t\t\tthis.readJob(jobId);",
                    "\t\t\t}",
                    "\t\t}",
                    "\t});",
                    "}",
                    "",
                    "this.jobSearchWindow.show(null, function(){",
                    "\tthis.jobSearchWindow.searchJobs(this.queryById('job').getValue(), this.queryById('part').getValue());",
                    "}, this);"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "searchJobs",
            "designerId": "3838b431-f5f0-4fae-bc0a-bafe4237e7f4"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "jobId"
                ],
                "fn": "readJob",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/Job/readJob',",
                    "\tjsonData:{jobId:jobId},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.getViewModel().getStore('PartStore').loadData([[reply.data.part, reply.data.partName]]);",
                    "\t\tthis.docFormLoadFormData(reply);",
                    "\t\tthis.jobId = jobId;",
                    "\t\tthis.queryById('jobBomTab').readJobBom(jobId);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "readJob",
            "designerId": "779ec3e6-fbc1-4fa2-bda5-9d5cf9b47311"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "createJob",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/Job/createJob',",
                    "\tjsonData:this.docFormGetAllFieldValues(),",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.readJob(reply.data);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "createJob",
            "designerId": "428738de-6d8b-4b9e-9411-9461e49087bb"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateJob",
                "implHandler": [
                    "let jsonData = this.docFormGetAllFieldValues();",
                    "jsonData.jobId = this.jobId;",
                    "",
                    "AERP.Ajax.request({",
                    "\turl:'/Job/updateJob',",
                    "\tjsonData:jsonData,",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.readJob(this.jobId);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "updateJob",
            "designerId": "d0223fb3-7ec3-486a-a028-d9b0977a14bd"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deleteJob",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/Job/deleteJob',",
                    "\tjsonData:{jobId:this.jobId},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.docFormReset();",
                    "\t\tthis.queryById('jobBomTab').queryById('jobBomGrid').setRootNode({});",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "deleteJob",
            "designerId": "cfee11ce-2504-43f2-a99a-2efc865afcad"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "readJobStatuses",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/DropDownSelectionEditor/readSelectionsForCombo',",
                    "\tjsonData:{selectionKey:'jobStatus'},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.getViewModel().getStore('StatusStore').loadData(reply.data);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "readJobStatuses",
            "designerId": "9634a69f-6bc5-4f7f-90e9-d5296e61715b"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "oldState",
                    "newState"
                ],
                "fn": "onPanelDocFormStateChangeD",
                "implHandler": [
                    "let fields = ['jobCreateDate'];",
                    "",
                    "if(newState !== \"search\") {",
                    "\tfields.push('job');",
                    "}",
                    "",
                    "for(let i in fields) {",
                    "\tlet field = this.queryById(fields[i]);",
                    "",
                    "\tfield.addCls('docFormReadOnly');",
                    "\tfield.setReadOnly(true);",
                    "}"
                ],
                "name": "docFormStateChanged",
                "scope": "me"
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPanelDocFormStateChangeD",
            "designerId": "8df80ce5-1612-442f-bf91-b3d84614f217"
        }
    ]
}