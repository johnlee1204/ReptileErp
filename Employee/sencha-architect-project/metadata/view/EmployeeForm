{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "bodyPadding": 10,
        "bodyStyle": "background:none",
        "designer|userAlias": "employeeform",
        "designer|userClassName": "EmployeeForm",
        "layout": "vbox",
        "mixins": [
            "['DocForm']"
        ],
        "width": 450
    },
    "configAlternates": {
        "bodyPadding": "auto",
        "bodyStyle": "string",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "layout": "string",
        "mixins": "object",
        "width": "auto"
    },
    "name": "MyPanel",
    "designerId": "e9dc3894-68b1-4910-a175-504a0559dda2",
    "viewControllerInstanceId": "928b24d8-cdaa-47cd-be14-2c87cf743a80",
    "viewModelInstanceId": "e59c5334-8bca-427b-943d-bc9e42d10414",
    "cn": [
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "itemId": "employeeFormToolbar",
                "layout|flex": 1
            },
            "configAlternates": {
                "dock": "string",
                "itemId": "string",
                "layout|flex": "number"
            },
            "name": "MyToolbar",
            "designerId": "7ca44f98-75e7-41ef-9d34-e06120f6ca07"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Employee No",
                "itemId": "employeeNumber"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField",
            "designerId": "ca0d8aac-4577-46bd-8081-6d5282118670"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "User Name",
                "itemId": "userName"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField4",
            "designerId": "de4f9330-1cd9-4a61-a6cb-f40a22d593f7"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Password",
                "itemId": "password"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField5",
            "designerId": "9b0c5981-817c-4c4a-b8b6-6e69cb081a5c"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "First Name",
                "itemId": "firstName"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField3",
            "designerId": "73e6389f-707b-426f-9d92-9dad6dbe0515"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Last Name",
                "itemId": "lastName"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField1",
            "designerId": "eeb954ed-7365-4665-b534-bedcef168efd"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Email",
                "itemId": "email"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField2",
            "designerId": "3688951c-b762-4498-88ea-3759072c978a"
        },
        {
            "type": "Ext.form.field.Date",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Hire Date",
                "itemId": "hireDate",
                "submitFormat": "Y-m-d"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string",
                "submitFormat": "string"
            },
            "name": "MyDateField",
            "designerId": "7d420323-eadb-4a90-8770-861e08c2f062"
        },
        {
            "type": "Ext.form.field.Date",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Termination Date",
                "itemId": "terminationDate",
                "submitFormat": "Y-m-d"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string",
                "submitFormat": "string"
            },
            "name": "MyDateField1",
            "designerId": "f1b76df5-c1f7-4996-bd1f-71da36d9e840"
        },
        {
            "type": "Ext.form.field.Text",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": "Pay Rate",
                "itemId": "payRate"
            },
            "configAlternates": {
                "fieldLabel": "string",
                "itemId": "string"
            },
            "name": "MyTextField6",
            "designerId": "9e68e8cf-7e32-4e4f-8422-d133c77b7011"
        },
        {
            "type": "Ext.form.field.ComboBox",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "displayField": "position",
                "fieldLabel": "Position",
                "forceSelection": true,
                "itemId": "position",
                "matchFieldWidth": false,
                "queryMode": "local",
                "store": [
                    "{PositionStore}"
                ],
                "valueField": "position",
                "width": 324
            },
            "configAlternates": {
                "store": "binding",
                "displayField": "datafield",
                "fieldLabel": "string",
                "forceSelection": "boolean",
                "itemId": "string",
                "queryMode": "string",
                "valueField": "datafield",
                "matchFieldWidth": "boolean",
                "width": "auto"
            },
            "name": "MyComboBox",
            "designerId": "09c73039-f258-4903-8cc0-f50beedcda20",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onPositionAfterRender",
                        "implHandler": [
                            "AppWindowManager.appOn('dropDownSelectionEditor', {",
                            "\tscope:this,",
                            "\tselectionchanged:function() {",
                            "\t\tthis.readPositions();",
                            "\t}",
                            "});",
                            "",
                            "component.el.on({",
                            "    contextmenu: function(event) {",
                            "        event.stopEvent();",
                            "        AppWindowManager.appLink('dropDownSelectionEditor', {dataKey:'position'});",
                            "    },",
                            "    scope:this",
                            "});",
                            ""
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onPositionAfterRender",
                    "designerId": "c7fda87e-9074-4e04-882f-2cd11a25fee3"
                }
            ]
        },
        {
            "type": "Ext.form.field.Tag",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "displayField": "groupName",
                "fieldLabel": "Permissions",
                "itemId": "permissions",
                "queryMode": "local",
                "store": [
                    "{PermissionStore}"
                ],
                "valueField": "groupId",
                "width": 256
            },
            "configAlternates": {
                "store": "binding",
                "displayField": "datafield",
                "fieldLabel": "string",
                "itemId": "string",
                "queryMode": "string",
                "valueField": "datafield",
                "width": "auto"
            },
            "name": "MyTagField",
            "designerId": "cafd02d4-d0dc-43e2-9c5c-8798f2eac4c8"
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "hidden": true,
                "html": "<img class = 'fireButton' src='/Employee/project-files/fire.png'>",
                "itemId": "fireButton",
                "style": "object-fit:contain;border-radius: 50%;",
                "width": 450
            },
            "configAlternates": {
                "html": "string",
                "style": "string",
                "hidden": "boolean",
                "itemId": "string",
                "width": "auto"
            },
            "name": "MyContainer",
            "designerId": "430191e2-2c60-4011-b347-d4532c8eeae7",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onContainerAfterRender",
                        "implHandler": [
                            "component.el.on('click', function(event, target) {",
                            "\tif(target.className === \"fireButton\") {",
                            "\t\tthis.terminateEmployee();",
                            "\t}",
                            "}, this);"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onContainerAfterRender",
                    "designerId": "9689fd9a-b007-4bf1-a840-fc41417c898c"
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelAfterRender",
                "implHandler": [
                    "this.docFormInit({",
                    "\ttoolbarId:'employeeFormToolbar',",
                    "\taddFn:'createEmployee',",
                    "\tsaveFn:'updateEmployee',",
                    "\tdeleteFn:'deleteEmployee'",
                    "});",
                    "",
                    "",
                    "AERP.Ajax.request({",
                    "\turl:'/Employee/readAppInitData',",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.getViewModel().getStore(\"PermissionStore\").loadData(reply.groups);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});",
                    "",
                    "this.readPositions();"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPanelAfterRender",
            "designerId": "2cec14e2-5738-4e41-a7ab-5b8a42fa316b"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "panel"
                ],
                "fn": "onPanelDocFormStateChangeD",
                "implHandler": [
                    ""
                ],
                "name": "docFormStateChanged",
                "scope": "me"
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onPanelDocFormStateChangeD",
            "designerId": "4caec55a-e5bc-400c-8cc0-cc9f66a7507f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "readPositions",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/DropDownSelectionEditor/readSelectionsForCombo',",
                    "\tjsonData:{selectionKey:'position'},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.getViewModel().getStore('PositionStore').loadData(reply.data);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "readPositions",
            "designerId": "42eea047-7091-435c-abfb-51ac2b685e06"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "employeeId"
                ],
                "fn": "readEmployee",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/Employee/readEmployee',",
                    "\tjsonData:{employeeId:employeeId},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.employeeId = employeeId;",
                    "\t\tlet fireButton = this.queryById('fireButton');",
                    "\t\tif(reply.data.position !== \"Owner\" && reply.data.position !== \"Senior Software Developer\") {",
                    "\t\t\tfireButton.show();",
                    "\t\t} else {",
                    "\t\t\tfireButton.hide();",
                    "\t\t}",
                    "\t\tthis.docFormLoadFormData(reply);",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "readEmployee",
            "designerId": "70951518-32e3-429d-a9bb-1d1dac404598"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "createEmployee",
                "implHandler": [
                    "let jsonData = this.docFormGetAllFieldValues();",
                    "jsonData.permissions = JSON.stringify(jsonData.permissions);",
                    "",
                    "AERP.Ajax.request({",
                    "\turl:'/Employee/createEmployee',",
                    "\tjsonData:jsonData,",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.readEmployee(reply.data);",
                    "\t\tthis.fireEvent('employeechanged');",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "createEmployee",
            "designerId": "1d99006f-2c6f-44c4-9d4c-c5a0a1d8e7b6"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateEmployee",
                "implHandler": [
                    "let jsonData = this.docFormGetAllFieldValues();",
                    "jsonData.employeeId = this.employeeId;",
                    "jsonData.permissions = JSON.stringify(jsonData.permissions);",
                    "",
                    "AERP.Ajax.request({",
                    "\turl:'/Employee/updateEmployee',",
                    "\tjsonData:jsonData,",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.readEmployee(this.employeeId);",
                    "\t\tthis.fireEvent('employeechanged');",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "updateEmployee",
            "designerId": "10891fac-833f-434c-91cc-093f07ffaff7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deleteEmployee",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "\turl:'/Employee/deleteEmployee',",
                    "\tjsonData:{employeeId:this.employeeId},",
                    "\tsuccess:function(reply) {",
                    "\t\tthis.employeeId = null;",
                    "\t\tthis.docFormReset();",
                    "\t\tthis.fireEvent('employeechanged');",
                    "\t},",
                    "\tscope:this,",
                    "\tmask:this",
                    "});"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "deleteEmployee",
            "designerId": "a4226f70-fe77-4968-bbbf-9009104860b2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "terminateEmployee",
                "implHandler": [
                    "this.audio = new Audio('/Employee/resources/firealarm.mp3');",
                    "this.audio.play();",
                    "",
                    "Ext.Msg.confirm(\"Are you sure?\", \"Are you sure?\", function(button) {",
                    "\tthis.audio.pause();",
                    "\tif(button === \"yes\") {",
                    "\t\tvar msg = new SpeechSynthesisUtterance();",
                    "\t\tmsg.text = this.queryById(\"firstName\").getValue() + \" \" + this.queryById(\"lastName\").getValue() + \" has been fired\";",
                    "\t\twindow.speechSynthesis.speak(msg);",
                    "",
                    "",
                    "",
                    "\t\tAERP.Ajax.request({",
                    "\t\t\turl:'/Employee/terminateEmployee',",
                    "\t\t\tjsonData:{employeeId:this.employeeId},",
                    "\t\t\tsuccess:function(reply) {",
                    "\t\t\t\tthis.readEmployee(this.employeeId);",
                    "\t\t\t\tthis.fireEvent('employeechanged');",
                    "\t\t\t},",
                    "\t\t\tscope:this,",
                    "\t\t\tmask:this",
                    "\t\t});",
                    "",
                    "",
                    "",
                    "",
                    "\t}",
                    "}, this);"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "terminateEmployee",
            "designerId": "2e8444a7-f072-40e0-9881-8e6444977308"
        }
    ]
}